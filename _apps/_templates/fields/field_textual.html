{% raw %}

{{!-- ================= DISPLAY PARAMETERS ================== --}}
{{!-- template = Template Name --}}
{{!-- id = Control ID --}}
{{!-- [large] = Size of Form Element Group --}}
{{!-- [title] = Form Element Title (used for label, field is used as fallback) --}}
{{!-- [clear] = Whether clear button should be displayed --}}
{{!-- [button] = Button Text (will include clear button too) --}}
{{!-- [action] = Button Action Command --}}
{{!-- [icon] = Icon for left-side of Element Group --}}
{{!-- [rows] = Number of Rows of Text to Expect (decides between text input and textbox) --}}
{{!-- [default] = Default Action to display (me = current user) --}}
{{!-- [value] = Default Text to display --}}
{{!-- [required] = Input is required --}}
{{!-- [readonly] = Input is disabled / readonly --}}
{{!-- [help] = Help information (html) to display --}}
{{!-- [description] = Template Description --}}

{{!-- ================= OUTPUT PARAMETERS =================== --}}
{{!-- [field] = Form Element Group Data Field Name --}}
{{!-- [order] = Data Output Order --}}
{{!-- ======================================================= --}}

{{!-- =================== OUTPUT FORMAT ===================== --}}
{{!-- {} / Nothing : If nothing has been entered --}}
{{!-- ------------------------------------------------------- --}}
{{!-- Order = field order if supplied --}}
{{!-- Value = entered text value --}}
{{!-- ======================================================= --}}

{{#if description}}<!-- {{description}} -->{{/if}}
<div class="form-group{{#if large}} form-group-lg{{/if}} row"{{#if field}} data-output-field="{{field}}"{{/if}}{{#if order}} data-output-order="{{order}}"{{/if}}{{#if template}} data-template="{{template}}"{{/if}} data-id="{{id}}">
	<label class="{{which wide 'col-12' 'col-md-3'}} col-form-label"
         for="{{id}}">{{val "" title field}}</label>
	<div class="{{which wide 'col-12' 'col-md-9'}}"> 
    {{#if (any button clear)}}<div role="group"
    	class="btn-group float-right mb-1{{#unless readonly}} d-flex d-lg-none{{else}} d-none{{/unless}}">
			{{> control_button b_small="true" b_icon_large="true" 
    		b_class="btn-secondary eraser no-active" b_title="Clear / Reset" b_target=id b_icon="refresh" disabled=readonly }}
			{{#if button}}{{> control_button b_small="true" b_id=(concat id "_BUTTON")
    		b_class="btn-primary textual-input-button" b_target=id b_action=action b_text=button disabled=readonly }}{{/if}}
		</div>{{/if}}
		<div class="input-group{{#if large}} input-group-lg{{/if}}">
			{{#if icon}}{{> control_icon large=large icon=icon }}{{/if}}
			{{#if (all rows (none pattern))}}
			<textarea id="{{id}}" name="{{id}}" data-output-name="Value"{{#if default}} data-input-default="{{default}}"{{/if}} class="form-control{{#if large}} form-control-lg{{/if}} resizable optional"{{#if required}} required="required"{{/if}}{{#if readonly}} readonly="readonly"{{/if}} rows="{{rows}}"{{#if help}} aria-describedby="{{id}}_HELP"{{/if}}>{{either value ""}}</textarea>
			{{else}}
			<input id="{{id}}" name="{{id}}" data-output-name="Value"{{#if default}} data-input-default="{{default}}"{{/if}} type="text" class="form-control{{#if large}} form-control-lg{{/if}} resizable"{{#if required}} required="required"{{/if}}{{#if readonly}} readonly="readonly"{{/if}}{{#if value}} value="{{value}}"{{/if}}{{#if help}} aria-describedby="{{id}}_HELP"{{/if}}{{#if pattern}} pattern="{{string pattern}}"{{/if}}/>
			{{/if}}
			{{#if (any button clear)}}<span class="input-group-append d-none{{#unless readonly}} d-lg-flex{{/unless}}">
				{{> control_button b_class="btn-secondary eraser no-active" b_title="Clear / Reset" b_target=id b_icon="refresh" disabled=readonly }}
				{{#if button}}{{> control_button b_id=(concat id "_BUTTON") b_class="btn-primary textual-input-button"
      		b_target=id b_action=action b_text=button disabled=readonly }}{{/if}}
      </span>{{/if}}
		</div>
		{{#if help}}<div id="{{id}}_HELP" class="form-text text-muted text-right">{{{help}}}</div>{{/if}}
	</div>
</div>
{% endraw %}