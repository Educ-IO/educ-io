{% assign templates = false %}
{% if page.templates %}
  {% assign templates = page.templates %}
{% elsif page.app and page.app != "" and site.data.apps[page.app].templates %}
  {% assign templates = site.data.apps[page.app].templates %}
{% endif %}

{% if templates %}

  {% if jekyll.environment == "debug" %}
    
    {% for template in templates %}

      <script id="{{ template }}" type="text/x-handlebars-template">
        {% include_relative _templates/{{ template }}.html %}
      </script>

    {% endfor %}

  {% else %}

    <script type="text/javascript" charset="utf-8">
      var templates = function() {
        {% for template in templates %}
          {% include scripts/templates/{{ template }}.js %}
        {% endfor %}
      };
    </script>

  {% endif %}

{% endif %}